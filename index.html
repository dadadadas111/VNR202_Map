<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Bản đồ số lịch sử Đảng Cộng sản Việt Nam — Prototype</title>

  <!-- Leaflet CSS (no integrity to avoid CDN digest mismatch in some environments) -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />

  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <header class="topbar">
    <div class="title-area">
      <h1>Bản đồ số lịch sử — Đảng Cộng sản Việt Nam</h1>
      <p class="subtitle">Chọn giai đoạn để lọc sự kiện; click vào tỉnh để xem chi tiết.</p>
    </div>
    <div class="control-area">
      <label for="periodSelect">Giai đoạn</label>
      <select id="periodSelect">
        <option value="p1">1930–1945</option>
        <option value="p2">1945–1975</option>
        <option value="p3">1975–nay</option>
      </select>
    </div>
  </header>

  <div id="loader" class="loader">Đang tải bản đồ...</div>

  <!-- Left / Right panels (hidden by default) -->
  <div id="leftPanel" class="panel left">
    <div class="panel-header">Sự kiện <button id="closeLeft" class="close-btn">✕</button></div>
    <div id="leftContent" class="panel-content">Chưa có dữ liệu.</div>
  </div>

  <div id="rightPanel" class="panel right">
    <div class="panel-header">Thông tin tỉnh <button id="closeRight" class="close-btn">✕</button></div>
    <div id="rightContent" class="panel-content">Chưa có tỉnh được chọn.</div>
  </div>

  <!-- Bottom panel for mobile: will show tabs (Events / Info) -->
  <div id="bottomPanel" class="panel bottom">
    <div class="panel-header bottom-header">
      <div class="bottom-tabs">
        <button id="tabEvents" class="tab-btn active">Sự kiện</button>
        <button id="tabInfo" class="tab-btn">Thông tin tỉnh</button>
      </div>
      <button id="closeBottom" class="close-btn">✕</button>
    </div>
    <div id="bottomContent" class="panel-content">Chưa có dữ liệu.</div>
  </div>

  <div id="map"></div>

  <!-- Leaflet JS (no integrity attribute to avoid blocked loading) -->
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

  <!-- small UI and map action helpers split out to keep main script smaller -->
  <script src="ui-panels.js"></script>
  <script src="map-actions.js"></script>

  <script src="script.js"></script>
</body>
</html>